import{i as E,a as b}from"./assets/vendor-Cbhu4xvy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const S=document.querySelector("body"),l=document.querySelector(".modal"),V=document.querySelector(".modal-window-btn"),y="is-open",h=e=>{l.classList.add(y),S.style.overflow="hidden",q(e)};V.addEventListener("click",()=>{p()});l.addEventListener("click",e=>{e.target===l&&p()});document.addEventListener("keydown",e=>{e.key==="Escape"&&p()});function p(){l.classList.remove(y),document.body.style.overflow="auto",g()}function q({title:e="",message:t=""}){const s=document.createElement("h2");s.classList.add("modal-window-title"),s.textContent=e;const r=document.createElement("p");r.classList.add("modal-window-text"),r.textContent=t,g();const o=document.querySelector(".modal-window");o.appendChild(s),o.appendChild(r)}function g(){const e=document.querySelector(".modal-window-title"),t=document.querySelector(".modal-window-text");e&&e.remove(),t&&t.remove()}const u=document.querySelector(".submit-form-js"),[c,d]=u,v=document.querySelector(".email-text-success"),w=document.querySelector(".email-text-error"),m=document.querySelector(".comments-text-error"),C=async({email:e,comment:t})=>{const s="https://portfolio-js.b.goit.study/api-docs/#/Requests/post_requests",{data:r}=await b.post(s,{email:e,comment:t});return r},a={valid:"valid-input",invalid:"invalid-input",isVisible:"is-visible"},O=e=>{const s=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e);return s?(c.classList.add(a.valid),v.classList.add(a.isVisible)):(c.classList.add(a.invalid),w.classList.add(a.isVisible)),s},x=e=>(e?d.classList.add(a.valid):(d.classList.add(a.invalid),m.classList.add(a.isVisible)),!!e),I=e=>{const t=e.name;t==="userEmail"&&(v.classList.remove(a.isVisible),m.classList.remove(a.isVisible)),t==="userComments"&&m.classList.remove(a.isVisible),e.classList.remove(a.valid),e.classList.remove(a.invalid)},M=()=>{[v,w,m].forEach(s=>{s.classList.remove(a.isVisible)}),[c,d].forEach(s=>{s.classList.remove(a.valid),s.classList.remove(a.invalid)})},L="formData",n=P()||{userEmail:"",userComments:""};c.value=n.userEmail;d.value=n.userComments;u.addEventListener("input",e=>{I(e.target);const{name:t,value:s}=e.target;n[t]=s.trim(),D(n)});u.addEventListener("submit",N);async function N(e){e.preventDefault();const{userEmail:t,userComments:s}=n,r=O(t),o=x(s);if(!(!r||!o))try{const i=await C({email:t,comment:s});h(i),A()}catch(i){E.error({title:"Error",message:i.message})}}function D(e,t=L){localStorage.setItem(t,JSON.stringify(e))}function P(e=L){return JSON.parse(localStorage.getItem(e))}function A(e=L){localStorage.removeItem(e),u.reset(),M(),n.userEmail="",n.userComments=""}
//# sourceMappingURL=index.js.map
