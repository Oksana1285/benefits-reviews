import{i as g,a as E}from"./assets/vendor-Cbhu4xvy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const m=document.querySelector(".submit-form-js"),[l,c]=m,v=document.querySelector(".email-text-success"),y=document.querySelector(".email-text-error"),d=document.querySelector(".comments-text-error"),S=async({email:e,comment:t})=>{const o="https://portfolio-js.b.goit.study/api-docs/#/Requests/post_requests",{data:n}=await E.post(o,{email:e,comment:t});return n},r={valid:"valid-input",invalid:"invalid-input",isVisible:"is-visible"},b=e=>{const o=/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e);return o?(l.classList.add(r.valid),v.classList.add(r.isVisible)):(l.classList.add(r.invalid),y.classList.add(r.isVisible)),o},V=e=>(e?c.classList.add(r.valid):(c.classList.add(r.invalid),d.classList.add(r.isVisible)),!!e),w=e=>{const t=e.name;t==="userEmail"&&(v.classList.remove(r.isVisible),d.classList.remove(r.isVisible)),t==="userComments"&&d.classList.remove(r.isVisible),e.classList.remove(r.valid),e.classList.remove(r.invalid)},q=()=>{[v,y,d].forEach(o=>{o.classList.remove(r.isVisible)}),[l,c].forEach(o=>{o.classList.remove(r.valid),o.classList.remove(r.invalid)})},p="formData",a=I()||{userEmail:"",userComments:""};l.value=a.userEmail;c.value=a.userComments;m.addEventListener("input",e=>{w(e.target);const{name:t,value:o}=e.target;a[t]=o.trim(),O(a)});m.addEventListener("submit",h);async function h(e){e.preventDefault();const{userEmail:t,userComments:o}=a,n=b(t),s=V(o);if(!(!n||!s))try{const i=S({email:t,comment:o});openModal(i),N()}catch(i){g.error({title:"Error",message:i.message})}}function O(e,t=p){localStorage.setItem(t,JSON.stringify(e))}function I(e=p){return JSON.parse(localStorage.getItem(e))}function N(e=p){localStorage.removeItem(e),m.reset(),q(),a.userEmail="",a.userComments=""}document.querySelector("body");const f=document.querySelector(".modal"),C=document.querySelector(".window-btn");C.addEventListener("click",()=>{L()});f.addEventListener("click",e=>{e.target===f&&L()});document.addEventListener("keydown",e=>{e.key==="Escape"&&L()});function L(){f.classList.remove(OPEN_CLASS),document.body.style.overflow="auto",x()}function x(){const e=document.querySelector(".modal-window-title"),t=document.querySelector(".modal-window-text");e&&e.remove(),t&&t.remove()}
//# sourceMappingURL=index.js.map
