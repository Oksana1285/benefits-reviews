{"version":3,"file":"index.js","sources":["../src/js/footer.js","../src/js/modal.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.submit-form-js');\nconst [inputEmail, inputComments] = form;\n\nconst emailSuccess = document.querySelector('.email-text-success');\nconst emailError = document.querySelector('.email-text-error');\nconst commentError = document.querySelector('.comments-text-error');\n\nconst sendUser = async ({ email, comment }) => {\n  const URL =\n    'https://portfolio-js.b.goit.study/api-docs/#/Requests/post_requests';\n\n  const { data } = await axios.post(URL, { email, comment });\n  return data;\n};\n\nconst VALID_INPUT = {\n  valid: 'valid-input',\n  invalid: 'invalid-input',\n  isVisible: 'is-visible',\n};\n\nconst emailValidate = email => {\n  const pattern = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  const isValidEmail = pattern.test(email);\n\n  if (!isValidEmail) {\n    inputEmail.classList.add(VALID_INPUT.invalid);\n    emailError.classList.add(VALID_INPUT.isVisible);\n  } else {\n    inputEmail.classList.add(VALID_INPUT.valid);\n    emailSuccess.classList.add(VALID_INPUT.isVisible);\n  }\n  return isValidEmail;\n};\n\nconst textValidate = text => {\n  if (!text) {\n    inputComments.classList.add(VALID_INPUT.invalid);\n    commentError.classList.add(VALID_INPUT.isVisible);\n  } else {\n    inputComments.classList.add(VALID_INPUT.valid);\n  }\n  return !!text;\n};\n\nconst fieldValidate = field => {\n  const fieldName = field.name;\n\n  if (fieldName === 'userEmail') {\n    emailSuccess.classList.remove(VALID_INPUT.isVisible);\n    commentError.classList.remove(VALID_INPUT.isVisible);\n  }\n\n  if (fieldName === 'userComments') {\n    commentError.classList.remove(VALID_INPUT.isVisible);\n  }\n\n  field.classList.remove(VALID_INPUT.valid);\n  field.classList.remove(VALID_INPUT.invalid);\n};\n\nconst allValidate = () => {\n  const tagValidate = [emailSuccess, emailError, commentError];\n\n  tagValidate.forEach(tagElement => {\n    tagElement.classList.remove(VALID_INPUT.isVisible);\n  });\n\n  const validateInputs = [inputEmail, inputComments];\n\n  validateInputs.forEach(input => {\n    input.classList.remove(VALID_INPUT.valid);\n    input.classList.remove(VALID_INPUT.invalid);\n  });\n};\n\nconst KEY = 'formData';\n\nconst formData = getFromLocalStorage() || {\n  userEmail: '',\n  userComments: '',\n};\n\ninputEmail.value = formData.userEmail;\ninputComments.value = formData.userComments;\n\nform.addEventListener('input', event => {\n  fieldValidate(event.target);\n\n  const { name, value } = event.target;\n  formData[name] = value.trim();\n  setLocalStorage(formData);\n});\n\nform.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  const { userEmail, userComments } = formData;\n\n  const isValidEmail = emailValidate(userEmail);\n  const isValidText = textValidate(userComments);\n\n  if (!isValidEmail || !isValidText) {\n    return;\n  }\n\n  try {\n    const data = sendUser({\n      email: userEmail,\n      comment: userComments,\n    });\n    openModal(data);\n\n    resetData();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n  }\n}\n\nfunction setLocalStorage(value, key = KEY) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\nfunction getFromLocalStorage(key = KEY) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nfunction resetData(key = KEY) {\n  localStorage.removeItem(key);\n  form.reset();\n  allValidate();\n  formData.userEmail = '';\n  formData.userComments = '';\n}\n","const body = document.querySelector('body');\nconst windowModal = document.querySelector('.modal');\nconst closeBtn = document.querySelector('.window-btn');\nconst OPEN_MODAL = 'is-open';\n\nexport const openModal = data => {\n  windowModal.classList.add(OPEN_MODAL);\n  body.style.overflow = 'hidden';\n  renderModal(data);\n};\n\ncloseBtn.addEventListener('click', () => {\n  closeWindow();\n});\n\nwindowModal.addEventListener('click', event => {\n  if (event.target === windowModal) {\n    closeWindow();\n  }\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeWindow();\n  }\n});\n\nfunction closeWindow() {\n  windowModal.classList.remove(OPEN_CLASS);\n  document.body.style.overflow = 'auto';\n  clearModal();\n}\n\nfunction renderModal({ title = '', message = '' }) {\n  const modalTitle = document.createElement('h2');\n  modalTitle.classList.add('modal-window-title');\n  modalTitle.textContent = title;\n\n  const modalMessage = document.createElement('p');\n  modalMessage.classList.add('modal-window-text');\n  modalMessage.textContent = message;\n  clearModalData();\n\n  const modalWindow = document.querySelector('.modal-window');\n  modalWindow.appendChild(modalTitle);\n  modalWindow.appendChild(modalText);\n}\n\nfunction clearModal() {\n  const modalTitle = document.querySelector('.modal-window-title');\n  const modalMessage = document.querySelector('.modal-window-text');\n  if (modalTitle) {\n    modalTitle.remove();\n  }\n  if (modalMessage) {\n    modalMessage.remove();\n  }\n}\n"],"names":["form","inputEmail","inputComments","emailSuccess","emailError","commentError","sendUser","email","comment","URL","data","axios","VALID_INPUT","emailValidate","isValidEmail","textValidate","text","fieldValidate","field","fieldName","allValidate","tagElement","input","KEY","formData","getFromLocalStorage","event","name","value","setLocalStorage","onSubmit","userEmail","userComments","isValidText","resetData","error","iziToast","key","windowModal","closeBtn","closeWindow","clearModal","modalTitle","modalMessage"],"mappings":"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"}