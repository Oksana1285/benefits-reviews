{"version":3,"file":"index.js","sources":["../src/js/modal.js","../src/js/footer.js"],"sourcesContent":["const body = document.querySelector('body');\nconst windowModal = document.querySelector('.modal');\nconst closeBtn = document.querySelector('.modal-window-btn');\nconst OPEN_MODAL = 'is-open';\n\nexport const openModal = data => {\n  windowModal.classList.add(OPEN_MODAL);\n  body.style.overflow = 'hidden';\n  renderModal(data);\n};\n\ncloseBtn.addEventListener('click', () => {\n  closeWindow();\n});\n\nwindowModal.addEventListener('click', event => {\n  if (event.target === windowModal) {\n    closeWindow();\n  }\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeWindow();\n  }\n});\n\nfunction closeWindow() {\n  windowModal.classList.remove(OPEN_MODAL);\n  document.body.style.overflow = 'auto';\n  clearModal();\n}\n\nfunction renderModal({ title = '', message = '' }) {\n  const modalTitle = document.createElement('h2');\n  modalTitle.classList.add('modal-window-title');\n  modalTitle.textContent = title;\n\n  const modalMessage = document.createElement('p');\n  modalMessage.classList.add('modal-window-text');\n  modalMessage.textContent = message;\n  clearModal();\n\n  const modalWindow = document.querySelector('.modal-window');\n  modalWindow.appendChild(modalTitle);\n  modalWindow.appendChild(modalMessage);\n}\n\nfunction clearModal() {\n  const modalTitle = document.querySelector('.modal-window-title');\n  const modalMessage = document.querySelector('.modal-window-text');\n  if (modalTitle) {\n    modalTitle.remove();\n  }\n  if (modalMessage) {\n    modalMessage.remove();\n  }\n}\n","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { openModal } from './modal';\n\nconst form = document.querySelector('.submit-form-js');\nconst [inputEmail, inputComments] = form;\n\nconst emailSuccess = document.querySelector('.email-text-success');\nconst emailError = document.querySelector('.email-text-error');\nconst commentError = document.querySelector('.comments-text-error');\n\nconst sendUser = async ({ email, comment }) => {\n  const URL =\n    'https://portfolio-js.b.goit.study/api-docs/#/Requests/post_requests';\n\n  const { data } = await axios.post(URL, { email, comment });\n  return data;\n};\n\nconst VALID_INPUT = {\n  valid: 'valid-input',\n  invalid: 'invalid-input',\n  isVisible: 'is-visible',\n};\n\nconst emailValidate = email => {\n  const pattern = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  const isValidEmail = pattern.test(email);\n\n  if (!isValidEmail) {\n    inputEmail.classList.add(VALID_INPUT.invalid);\n    emailError.classList.add(VALID_INPUT.isVisible);\n  } else {\n    inputEmail.classList.add(VALID_INPUT.valid);\n    emailSuccess.classList.add(VALID_INPUT.isVisible);\n  }\n  return isValidEmail;\n};\n\nconst textValidate = text => {\n  if (!text) {\n    inputComments.classList.add(VALID_INPUT.invalid);\n    commentError.classList.add(VALID_INPUT.isVisible);\n  } else {\n    inputComments.classList.add(VALID_INPUT.valid);\n  }\n  return !!text;\n};\n\nconst fieldValidate = field => {\n  const fieldName = field.name;\n\n  if (fieldName === 'userEmail') {\n    emailSuccess.classList.remove(VALID_INPUT.isVisible);\n    commentError.classList.remove(VALID_INPUT.isVisible);\n  }\n\n  if (fieldName === 'userComments') {\n    commentError.classList.remove(VALID_INPUT.isVisible);\n  }\n\n  field.classList.remove(VALID_INPUT.valid);\n  field.classList.remove(VALID_INPUT.invalid);\n};\n\nconst allValidate = () => {\n  const tagValidate = [emailSuccess, emailError, commentError];\n\n  tagValidate.forEach(tagElement => {\n    tagElement.classList.remove(VALID_INPUT.isVisible);\n  });\n\n  const validateInputs = [inputEmail, inputComments];\n\n  validateInputs.forEach(input => {\n    input.classList.remove(VALID_INPUT.valid);\n    input.classList.remove(VALID_INPUT.invalid);\n  });\n};\n\nconst KEY = 'formData';\n\nconst formData = getLocalStorage() || {\n  userEmail: '',\n  userComments: '',\n};\n\ninputEmail.value = formData.userEmail;\ninputComments.value = formData.userComments;\n\nform.addEventListener('input', event => {\n  fieldValidate(event.target);\n\n  const { name, value } = event.target;\n  formData[name] = value.trim();\n  setLocalStorage(formData);\n});\n\nform.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  const { userEmail, userComments } = formData;\n\n  const isValidEmail = emailValidate(userEmail);\n  const isValidText = textValidate(userComments);\n\n  if (!isValidEmail || !isValidText) {\n    return;\n  }\n\n  try {\n    const data = await sendUser({\n      email: userEmail,\n      comment: userComments,\n    });\n    openModal(data);\n\n    resetData();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n  }\n}\n\nfunction setLocalStorage(value, key = KEY) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\nfunction getLocalStorage(key = KEY) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nfunction resetData(key = KEY) {\n  localStorage.removeItem(key);\n  form.reset();\n  allValidate();\n  formData.userEmail = '';\n  formData.userComments = '';\n}\n"],"names":["body","windowModal","closeBtn","OPEN_MODAL","openModal","data","renderModal","closeWindow","event","clearModal","title","message","modalTitle","modalMessage","modalWindow","form","inputEmail","inputComments","emailSuccess","emailError","commentError","sendUser","email","comment","URL","axios","VALID_INPUT","emailValidate","isValidEmail","textValidate","text","fieldValidate","field","fieldName","allValidate","tagElement","input","KEY","formData","getLocalStorage","name","value","setLocalStorage","onSubmit","userEmail","userComments","isValidText","resetData","error","iziToast","key"],"mappings":"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"}