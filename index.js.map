{"version":3,"file":"index.js","sources":["../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.submit-form-js');\nconst [inputEmail, inputComments] = form;\n\nconst emailSuccess = document.querySelector('.email-text-success');\nconst emailError = document.querySelector('.email-text-error');\nconst commentError = document.querySelector('.comments-text-error');\n\nconst sendUser = async ({ email, comment }) => {\n  const URL =\n    'https://portfolio-js.b.goit.study/api-docs/#/Requests/post_requests';\n\n  const { data } = await axios.post(URL, { email, comment });\n  return data;\n};\n\nconst FON_SUCCESS = {\n  valid: 'valid-input',\n  invalid: 'invalid-input',\n  isVisible: 'is-visible',\n};\n\nconst emailValidate = email => {\n  const pattern = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  const isValidEmail = pattern.test(email);\n\n  if (!isValidEmail) {\n    inputEmail.classList.add(FON_SUCCESS.invalid);\n    emailError.classList.add(FON_SUCCESS.isVisible);\n  } else {\n    inputEmail.classList.add(FON_SUCCESS.valid);\n    emailSuccess.classList.add(FON_SUCCESS.isVisible);\n  }\n  return isValidEmail;\n};\n\nexport const textValidate = text => {\n  if (!text) {\n    inputComments.classList.add(FON_SUCCESS.invalid);\n    commentError.classList.add(FON_SUCCESS.isVisible);\n  } else {\n    inputComments.classList.add(FON_SUCCESS.valid);\n  }\n  return !!text;\n};\n\nconst fieldValidate = field => {\n  const fieldName = field.name;\n\n  if (fieldName === 'userEmail') {\n    emailSuccess.classList.remove(FON_SUCCESS.isVisible);\n    commentError.classList.remove(FON_SUCCESS.isVisible);\n  }\n\n  if (fieldName === 'userComments') {\n    commentError.classList.remove(FON_SUCCESS.isVisible);\n  }\n\n  field.classList.remove(FON_SUCCESS.valid);\n  field.classList.remove(FON_SUCCESS.invalid);\n};\n\nconst allValidate = () => {\n  const tagValidate = [emailSuccess, emailError, commentError];\n\n  tagValidate.forEach(tagElement => {\n    tagElement.classList.remove(FON_SUCCESS.isVisible);\n  });\n\n  const validateInputs = [inputEmail, inputComments];\n\n  validateInputs.forEach(input => {\n    input.classList.remove(FON_SUCCESS.valid);\n    input.classList.remove(FON_SUCCESS.invalid);\n  });\n};\n\nconst KEY = 'formData';\n\nconst formData = getFromLocalStorage() || {\n  userEmail: '',\n  userComments: '',\n};\n\ninputEmail.value = formData.userEmail;\ninputComments.value = formData.userComments;\n\nform.addEventListener('input', event => {\n  fieldValidate(event.target);\n\n  const { name, value } = event.target;\n  formData[name] = value.trim();\n  setLocalStorage(formData);\n});\n\nform.addEventListener('submit', onSubmit);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  const { userEmail, userComments } = formData;\n\n  const isValidEmail = emailSuccess(userEmail);\n  const isValidText = textValidate(userComments);\n\n  if (!isValidEmail || !isValidText) {\n    return;\n  }\n\n  try {\n    const data = await sendUser({\n      email: userEmail,\n      comment: userComments,\n    });\n    openModal(data);\n\n    resetData();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n  }\n}\n\n// // helpers\n// function setLocalStorage(value, key = KEY) {\n//   localStorage.setItem(key, JSON.stringify(value));\n// }\n// function getFromLocalStorage(key = KEY) {\n//   return JSON.parse(localStorage.getItem(key));\n// }\n\n// function resetData(key = KEY) {\n//   localStorage.removeItem(key);\n//   form.reset();\n//   allValidate();\n//   formData.userEmail = '';\n//   formData.userComments = '';\n// }\n\n// (() => {\n//   const refs = {\n//     // Додати атрибут data-modal-open на кнопку відкриття\n//     openModalBtn: document.querySelector('[data-modal-open]'),\n//     // Додати атрибут data-modal-close на кнопку закриття\n//     closeModalBtn: document.querySelector('[data-modal-close]'),\n//     // Додати атрибут data-modal на бекдроп модалки\n//     modal: document.querySelector('[data-modal]'),\n//   };\n\n//   refs.openModalBtn.addEventListener('click', toggleModal);\n//   refs.closeModalBtn.addEventListener('click', toggleModal);\n\n//   function toggleModal() {\n//     // is-open це клас який буде додаватися/забиратися на бекдроп при натисканні на кнопки\n//     refs.modal.classList.toggle('is-open');\n//   }\n// })();\n\n\n"],"names":["form","inputEmail","inputComments","emailSuccess","commentError","sendUser","email","comment","URL","data","axios","FON_SUCCESS","textValidate","text","fieldValidate","field","fieldName","formData","event","name","value","onSubmit","userEmail","userComments","isValidEmail","isValidText","error","iziToast"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,iBAAiB,EAC/C,CAACC,EAAYC,CAAa,EAAIF,EAE9BG,EAAe,SAAS,cAAc,qBAAqB,EAC9C,SAAS,cAAc,mBAAmB,EAC7D,MAAMC,EAAe,SAAS,cAAc,sBAAsB,EAE5DC,EAAW,MAAO,CAAE,MAAAC,EAAO,QAAAC,KAAc,CAC7C,MAAMC,EACJ,sEAEI,CAAE,KAAAC,GAAS,MAAMC,EAAM,KAAKF,EAAK,CAAE,MAAAF,EAAO,QAAAC,CAAO,CAAE,EACzD,OAAOE,CACT,EAEME,EAAc,CAClB,MAAO,cACP,QAAS,gBACT,UAAW,YACb,EAgBaC,EAAeC,IACrBA,EAIHX,EAAc,UAAU,IAAIS,EAAY,KAAK,GAH7CT,EAAc,UAAU,IAAIS,EAAY,OAAO,EAC/CP,EAAa,UAAU,IAAIO,EAAY,SAAS,GAI3C,CAAC,CAACE,GAGLC,EAAgBC,GAAS,CAC7B,MAAMC,EAAYD,EAAM,KAEpBC,IAAc,cAChBb,EAAa,UAAU,OAAOQ,EAAY,SAAS,EACnDP,EAAa,UAAU,OAAOO,EAAY,SAAS,GAGjDK,IAAc,gBAChBZ,EAAa,UAAU,OAAOO,EAAY,SAAS,EAGrDI,EAAM,UAAU,OAAOJ,EAAY,KAAK,EACxCI,EAAM,UAAU,OAAOJ,EAAY,OAAO,CAC5C,EAmBMM,EAAW,oBAAmB,GAAM,CACxC,UAAW,GACX,aAAc,EAChB,EAEAhB,EAAW,MAAQgB,EAAS,UAC5Bf,EAAc,MAAQe,EAAS,aAE/BjB,EAAK,iBAAiB,QAASkB,GAAS,CACtCJ,EAAcI,EAAM,MAAM,EAE1B,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAM,OAC9BD,EAASE,CAAI,EAAIC,EAAM,KAAI,EAC3B,gBAAgBH,CAAQ,CAC1B,CAAC,EAEDjB,EAAK,iBAAiB,SAAUqB,CAAQ,EAExC,eAAeA,EAASH,EAAO,CAC7BA,EAAM,eAAc,EACpB,KAAM,CAAE,UAAAI,EAAW,aAAAC,CAAc,EAAGN,EAE9BO,EAAerB,EAAamB,CAAS,EACrCG,EAAcb,EAAaW,CAAY,EAE7C,GAAI,GAACC,GAAgB,CAACC,GAItB,GAAI,CACF,MAAMhB,EAAO,MAAMJ,EAAS,CAC1B,MAAOiB,EACP,QAASC,CACf,CAAK,EACD,UAAUd,CAAI,EAEd,WACD,OAAQiB,EAAO,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,OACrB,CAAK,CACF,CACH"}